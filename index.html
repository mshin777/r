
<!DOCTYPE html>
<html>
	<head>
    	<title>Room Booking App</title>
        <!-- Firebase App is needed to use Firebase Database -->
        <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-app.js"></script>
        <!-- Firebase Database -->
        <script src="https://www.gstatic.com/firebasejs/7.14.2/firebase-database.js"></script>
        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyCbT1_sK2FtA_eoG8lhW-kz9QVkfI6vjDo",
                authDomain: "room-booking-app-b8e90.firebaseapp.com",
                databaseURL: "https://room-booking-app-b8e90.firebaseio.com",
                projectId: "room-booking-app-b8e90",
                storageBucket: "room-booking-app-b8e90.appspot.com",
                messagingSenderId: "1050331725452",
                appId: "1:1050331725452:web:e9c8a8cfdaf489d2a2fd86",
                measurementId: "G-XV3GH3Y1D2"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            // Get a reference to the database service
            var database = firebase.database();
        </script>
	</head>
	<body>
    	<h1>Room Booking App</h1>
        <p>We have 5 rooms. Please select the room you want to book.</p>
        <div>
            <button id="roomA" disabled>Room A</button>
            <button id="roomB" disabled>Room B</button>
            <button id="roomC" disabled>Room C</button>
            <button id="roomD" disabled>Room D</button>
            <button id="roomE" disabled>Room E</button>
        </div>
        <!-- Modal -->
        <div id="modal" style="display:none;">
            <div>
                <h3>Booking Confirmation</h3>
                <p>Your booking is successful.</p>
            </div>
            <div>
                <h3>Error</h3>
                <p>Something went wrong. Please try again.</p>
            </div>
        </div>
        <!-- Booking Form -->
        <div id="bookingForm" style="display:none;">
            <h3>Booking Form</h3>
            <form>
                <div>
                    <label>Name:</label>
                    <input type="text" id="name" name="name">
                </div>
                <div>
                    <label>Email:</label>
                    <input type="text" id="email" name="email">
                </div>
                <div>
                    <input type="submit" value="Book Room">
                </div>
            </form>
        </div>
        <script type="text/javascript">
            // Get the buttons
            var roomA = document.getElementById('roomA');
            var roomB = document.getElementById('roomB');
            var roomC = document.getElementById('roomC');
            var roomD = document.getElementById('roomD');
            var roomE = document.getElementById('roomE');
            // Check if the room is booked or not
            function isBooked(room) {
                var booked;
                // Get the data from the database
                firebase.database().ref('rooms/' + room).once('value').then(function(snapshot) {
                    booked = snapshot.val().booked;
                    // If the room is not booked, enable the button
                    if (!booked) {
                        document.getElementById(room).disabled = false;
                    }
                });
            }
            // Check for all the rooms
            isBooked('roomA');
            isBooked('roomB');
            isBooked('roomC');
            isBooked('roomD');
            isBooked('roomE');
            // Listen for button clicks
            roomA.addEventListener('click', function() {
                // Show the booking form
                document.getElementById('bookingForm').style.display = 'block';
            });
            roomB.addEventListener('click', function() {
                // Show the booking form
                document.getElementById('bookingForm').style.display = 'block';
            });
            roomC.addEventListener('click', function() {
                // Show the booking form
                document.getElementById('bookingForm').style.display = 'block';
            });
            roomD.addEventListener('click', function() {
                // Show the booking form
                document.getElementById('bookingForm').style.display = 'block';
            });
            roomE.addEventListener('click', function() {
                // Show the booking form
                document.getElementById('bookingForm').style.display = 'block';
            });
            // Listen for form submission
            document.querySelector('form').addEventListener('submit', function(e) {
                // Prevent default behavior
                e.preventDefault();
                // Get the values from the form
                var name = document.getElementById('name').value;
                var email = document.getElementById('email').value;
                // Find the room to book
                if (roomA.disabled == false) {
                    var room = 'roomA';
                }
                else if (roomB.disabled == false) {
                    var room = 'roomB';
                }
                else if (roomC.disabled == false) {
                    var room = 'roomC';
                }
                else if (roomD.disabled == false) {
                    var room = 'roomD';
                }
                else if (roomE.disabled == false) {
                    var room = 'roomE';
                }
                // Book the room
                firebase.database().ref('rooms/' + room).set({
                    booked: true,
                    user: {
                        name: name,
                        email: email
                    }
                });
                // Show the modal
                document.getElementById('modal').style.display = 'block';
            });
        </script>
	</body>
</html>
